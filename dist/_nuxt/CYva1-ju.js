import{K as x,L as A,e as w,M as R,N as E}from"./C2IkTLXT.js";let L;function M(){return L}const s=new Map;let g,m,i,p;function k(a){const o=x().path,n=M(),{currentRoute:f}=A(),l=A();let d=!1,c=a;const h={dispose(){const e=[...s.get(o)],t=e.findIndex(u=>u[0]===c);if(t===-1)return;const r=e[t][1];r==null||r.dispose(),e.splice(t,1),s.set(o,e)},patch(e){const t=[...s.get(o)],r=t.findIndex(I=>I[0]===c);if(r===-1)return;const[,u]=t[r];c=e,u==null||u.patch(c),t.splice(r,1,[c,u]),s.set(o,t)}};if(s.has(o)){const e=n==null?void 0:n.push(a),t=s.get(o)||[];s.set(o,[...t,[a,e]])}else{const e=n==null?void 0:n.push(a);s.set(o,[[a,e]])}return w(h.dispose),g||(g=l.beforeEach(()=>{p=f.value.path})),m||(m=l.afterEach(()=>{i=f.value.path})),R(()=>{let e=s.get(p);e&&(e=e.map(([t,r])=>(r==null||r.dispose(),[t,void 0])),s.set(p,e)),d=!0}),E(()=>{if(d){let e=s.get(i);e&&(e=e.map(([t,r])=>{r==null||r.dispose();const u=n==null?void 0:n.push(t);return[t,u]}),s.set(i,e))}}),h}export{k as u};
